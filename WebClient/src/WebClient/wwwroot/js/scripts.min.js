///<amd-module name="app"/>
define("app", ["require", "exports", "home/buildings/buildings", "home/notifications/notifications", "logIn/logIn", "knockout"], function (require, exports, buildings_1, notifications_1, logIn_1, ko) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var App = (function () {
        function App() {
            var _this = this;
            this.buildings = new buildings_1.Buildings();
            this.notifications = new notifications_1.Notifications();
            this.logIn = new logIn_1.LogIn(function () { return _this.authorize(); });
            this.authorized = ko.observable(true);
        }
        App.prototype.unauthorize = function () {
            this.authorized(false);
        };
        App.prototype.authorize = function () {
            this.authorized(true);
        };
        return App;
    }());
    App.apiUrl = "http://localhost:5000/api";
    exports.App = App;
    var AppSingleton = (function () {
        function AppSingleton() {
        }
        AppSingleton.setInstance = function (app) {
            this.instance = app;
        };
        AppSingleton.getInstance = function () {
            return this.instance;
        };
        return AppSingleton;
    }());
    exports.AppSingleton = AppSingleton;
});
//# sourceMappingURL=app.js.map
///<amd-module name="logIn/logIn"/>
define("logIn/logIn", ["require", "exports", "knockout", "utils/communication/rest"], function (require, exports, ko, rest) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var LogIn = (function () {
        function LogIn(onLogIn) {
            var _this = this;
            this.validate = function () { return _this.userName().length !== 0 && _this.password().length !== 0; };
            this.userName = ko.observable("");
            this.password = ko.observable("");
            this.onLogIn = onLogIn;
        }
        LogIn.prototype.logIn = function () {
            var _this = this;
            if (!this.validate())
                return;
            rest.post("user", "logIn", { userName: this.userName(), password: this.password() })
                .done(function () { return _this.onLogIn(); });
        };
        LogIn.prototype.dispose = function () { };
        return LogIn;
    }());
    exports.LogIn = LogIn;
});
//# sourceMappingURL=logIn.js.map
///<amd-module name="home/buildings/buildings"/>
define("home/buildings/buildings", ["require", "exports", "knockout", "utils/communication/rest"], function (require, exports, ko, rest) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var Buildings = (function () {
        function Buildings() {
            var _this = this;
            this.buildings = ko.observableArray([]);
            rest.get("buildings", "").done(function (data) {
                _this.buildings(data);
            });
        }
        Buildings.prototype.dispose = function () {
        };
        return Buildings;
    }());
    exports.Buildings = Buildings;
});
//# sourceMappingURL=buildings.js.map
///<amd-module name="home/notifications/notifications"/>
define("home/notifications/notifications", ["require", "exports", "knockout"], function (require, exports, ko) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var Notifications = (function () {
        function Notifications() {
            this.newNotifications = ko.observableArray(["Notification1", "Notification2"]);
        }
        Notifications.prototype.dispose = function () {
        };
        return Notifications;
    }());
    exports.Notifications = Notifications;
});
//# sourceMappingURL=notifications.js.map
///<amd-module name="utils/communication/rest"/>
define("utils/communication/rest", ["require", "exports", "jquery", "app"], function (require, exports, $, app_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    function get(controller, action) {
        var url = app_1.App.apiUrl + "/" + controller + "/" + action;
        return $.ajax(url).always(function (xhr) {
            if (xhr.status === 401)
                app_1.AppSingleton.getInstance().unauthorize();
        });
        ;
    }
    exports.get = get;
    function post(controller, action, body) {
        var url = app_1.App.apiUrl + "/" + controller + "/" + action;
        return $.ajax({
            contentType: 'application/json',
            data: JSON.stringify(body),
            dataType: 'json',
            type: "POST",
            url: url
        }).always(function (xhr) {
            if (xhr.status === 401)
                app_1.AppSingleton.getInstance().unauthorize();
        });
    }
    exports.post = post;
});
//# sourceMappingURL=rest.js.map