<div>
    <div>
        <!-- ko if: canEdit() -->
        <input class="my-input" type="text" id="report-date" data-provide="datepicker" placeholder="Date">
        <input class="my-input" type="number" min="1" placeholder="Number of workers" data-bind="value: numberOfWorkers">
        <!-- /ko -->
        <!-- ko if: !canEdit() -->
        <span id="report-date"></span>
        <span data-bind="text: numberOfWorkers"></span>
        <!-- /ko -->
    </div>
    <div class="work-manage">
        <span class="header">
            <span>Work done:</span>
            <!-- ko if: !addNew()-->
            <button class="btn my-button add" data-bind="click: addNewWork, visible: canEdit">
                <i class="fa fa-plus"></i>
            </button>
            <!-- /ko -->
        </span>
        <div class="work-done" data-bind="foreach: workDone">
            <div class="work">
                <i class="fa fa-circle"></i>
                <span data-bind="text: estimationDescription"></span>
                <span>: </span>
                <!-- ko if: $parent.canEdit() -->
                <div class="quantity" data-bind="template: { name: 'editable-value', data: quantity }"></div>
                <!-- /ko -->
                <!-- ko if: !$parent.canEdit() -->
                <span class="quantity" data-bind="template: { text: quantity.value() }"></span>
                <!-- /ko -->
                <button class="btn my-button delete" data-bind="click: deleteItem, visible: $parent.canEdit"><i class="fa fa-trash" aria-hidden="true"></i></button>
            </div>
        </div>
        <!-- ko if: addNew() -->
        <div class="adding-work">
            <div class="dropdown">
                <button class="my-input dropdown-toggle" type="button" id="dropdown_estimations" data-toggle="dropdown">
                    Estimation...
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdown_estimations">
                    <input class="my-input search" type="search" placeholder="Search..." autofocus="autofocus" data-bind="event: { input: filterEstimations }">
                    <div data-bind="foreach: visibleEstimations">
                        <input type="button" class="dropdown-item" data-bind="value: $data.displayValue, click: $parent.chooseEstimation" />
                    </div>
                    <div class="dropdown-header" data-bind="visible: visibleEstimations().length === 0">No coins found</div>
                </div>
            </div>
            <input class="my-input" type="number" step="0.01" min="0.01" data-bind="value: newWorkQuantity" placeholder="Quantity"/>
            <button class="btn my-button" data-bind="click: saveAdding"><i class="fa fa-check" aria-hidden="true"></i></button>
            <button class="btn my-button" data-bind="click: cancelAdding"><i class="fa fa-times" aria-hidden="true"></i></button>
        </div>
        <!-- /ko -->
    </div>
</div>

<script type="text/html" id="editable-value">
    <div class="editable-value">
        <span data-bind="text: value, visible: !editingMode()"></span>
        <input data-bind="value: value, visible: editingMode()"></input>
        <button class="editable-value-button" data-bind="click: toggleMode, css: {'show': editingMode()}"><i class="fa" aria-hidden="true" data-bind="css: icon()"></i></button>
    </div>
</script>